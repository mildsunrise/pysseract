FROM quay.io/pypa/manylinux2014_x86_64
LABEL "Author"="Stephen Hogg"

RUN yum update && yum -y install libpng-devel libtiff-devel libjpeg-devel && cd /tmp && git clone git://anongit.freedesktop.org/pkg-config && cd pkg-config/ && git fetch && git fetch --tags && git checkout pkg-config-0.29.2 && ./autogen.sh && make install && cd .. && git clone https://github.com/DanBloomberg/leptonica && cd leptonica/ && git fetch && git fetch --tags && git checkout 1.77.0 && ./autogen.sh && ./configure --prefix=/usr/local/ && make install && cd .. && git clone https://github.com/tesseract-ocr/tesseract && cd tesseract/ && git fetch && git fetch --tags && git checkout 4.1 && ./autogen.sh && ./configure && make install && cd / && rm -rf /tmp/pkg-config /tmp/leptonica /tmp/tesseract && curl -O https://raw.githubusercontent.com/tesseract-ocr/tessdata/master/eng.traineddata >> /usr/local/share/tessdata/eng.traineddata && curl -O https://raw.githubusercontent.com/tesseract-ocr/tessdata/master/osd.traineddata >> /usr/local/share/tessdata/osd.traineddata